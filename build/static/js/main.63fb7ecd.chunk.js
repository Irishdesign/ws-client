(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{191:function(e,t,n){},195:function(e,t,n){},199:function(e,t,n){},285:function(e,t,n){},288:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(30),i=n.n(r);n(191),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(28),o=n.n(s),l=n(40),u=n(20),j=n(82),d=(n(195),"SET_USER"),b="SET_CURRENT_AUCTION",h="SET_SHOW_MENU",O="SET_SHOW_CREATE",m="SET_PLAYER_DATA",p="LOG_OUT";function f(e){return{type:d,data:e}}function x(){return{type:p,data:!1}}var v=function(e){return{type:b,data:e}},g=(n(150),n(319)),S=n(181),y=n(41),N=n(25),w=(n(199),n(26)),k=n(313),_=n(316),E=n(315),C=function(e){return"https://auc-websocket.herokuapp.com/api/auction/".concat(e)},I=function(e){return"https://auc-websocket.herokuapp.com/api/auction/player/".concat(e)},A=function(e){return"https://auc-websocket.herokuapp.com/api/auction/".concat(e,"/order")},D=function(e){return"https://auc-websocket.herokuapp.com/api/auction/".concat(e,"/player")},T=function(e){return"https://auc-websocket.herokuapp.com/api/auction/".concat(e,"/start")},L=function(e){return"https://auc-websocket.herokuapp.com/api/auction/".concat(e,"/close")},F=function(e){return"https://auc-websocket.herokuapp.com/api/auction/".concat(e,"/deduct")},P="get",U="post",H={ENGLISH:"E",DUTCH:"D",SEALED1:"S1",SEALED2:"S2"},B={UNIFORM:"U",GAUSSIAN:"G"},V="acuxxxtoxxxken",G=n(49),q=n.n(G),M=function(e){return q.a.post("https://auc-websocket.herokuapp.com/api/auth/signup",e).then((function(e){return e.data}),(function(e){console.log(e)}))},R=localStorage.getItem(V),W=function(){var e=localStorage.getItem(V);return e?q()({method:U,url:"https://auc-websocket.herokuapp.com/api/auth/user",data:{token:e}}).then((function(e){return localStorage.setItem(V,e.data.accessToken),e.data}),(function(e){console.log(e)})):null},J=function(){var e=localStorage.getItem(V);return q()({method:P,url:"https://auc-websocket.herokuapp.com/api/auction/list",headers:{"x-access-token":e}}).then((function(e){return e.data}),(function(e){console.log(e)}))},z=function(e){var t=localStorage.getItem(V);return q()({method:U,url:"https://auc-websocket.herokuapp.com/api/auction",data:e,headers:{"x-access-token":t}}).then((function(e){return e.data}),(function(e){console.log(e)}))},K=function(e,t){var n=localStorage.getItem(V);return q()({method:U,url:A(e),data:t,headers:{"x-access-token":n}}).then((function(e){return e.data}),(function(e){console.log(e)}))},Y=function(e,t){return q()({method:U,url:D(e),data:{name:t}}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},$=function(e){var t=localStorage.getItem(V);return q()({method:P,url:C(e),headers:{"x-access-token":t}}).then((function(e){return e.data}),(function(e){console.log(e)}))},Q=n(3),X={labelCol:{span:8},wrapperCol:{span:16}},Z={wrapperCol:{offset:8,span:16}},ee=function(e){var t=k.a.useForm(),n=Object(u.a)(t,1)[0],c=(Object(N.b)(),function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,M(t);case 3:n=e.sent,console.log("signup",n),n.status>=400?S.b.warning(n.message):(S.b.success("Successfully created!"),r());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a=e.visible,r=e.close;return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(_.a,{visible:a,title:"Sign up",onCancel:function(){r()},footer:null,children:Object(Q.jsxs)(k.a,Object(w.a)(Object(w.a)({},X),{},{form:n,name:"control-hooks",onFinish:c,children:[Object(Q.jsx)(k.a.Item,{name:"username",label:"Name",rules:[{required:!0}],children:Object(Q.jsx)(E.a,{})}),Object(Q.jsx)(k.a.Item,{name:"email",label:"Email",rules:[{required:!0}],children:Object(Q.jsx)(E.a,{})}),Object(Q.jsx)(k.a.Item,{name:"password",label:"Password",rules:[{required:!0}],children:Object(Q.jsx)(E.a.Password,{})}),Object(Q.jsxs)(k.a.Item,Object(w.a)(Object(w.a)({},Z),{},{children:[Object(Q.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Q.jsx)(y.a,{htmlType:"button",onClick:function(){n.setFieldsValue({username:"abc",email:"abc@gmail.com",password:"12345"})},children:"Reset"})]}))]}))})})},te={labelCol:{span:8},wrapperCol:{span:16}},ne={wrapperCol:{offset:8,span:16}},ce=function(e){var t=k.a.useForm(),n=Object(u.a)(t,1)[0],c=Object(N.b)();a.a.useEffect((function(){localStorage.getItem(V)&&W()}),[]);var r=e.visible,i=e.close;return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(_.a,{visible:r,title:"Log in",onCancel:function(){i()},footer:null,children:Object(Q.jsxs)(k.a,Object(w.a)(Object(w.a)({},te),{},{form:n,name:"control-hooks",onFinish:function(e){(function(e,t){return q.a.post("https://auc-websocket.herokuapp.com/api/auth/signin",e).then((function(e){return localStorage.setItem(V,e.data.accessToken),t&&t(),e}),(function(e){console.log(e)}))})(e).then((function(e){e?(c(f(e.data)),i()):console.log("log in error!")}))},children:[Object(Q.jsx)(k.a.Item,{name:"username",label:"name",rules:[{required:!0,message:"Please input your password!"}],children:Object(Q.jsx)(E.a,{})}),Object(Q.jsx)(k.a.Item,{name:"password",label:"Password",rules:[{required:!0}],children:Object(Q.jsx)(E.a.Password,{})}),Object(Q.jsxs)(k.a.Item,Object(w.a)(Object(w.a)({},ne),{},{children:[Object(Q.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Q.jsx)(y.a,{htmlType:"button",onClick:function(){n.setFieldsValue({username:"abc",password:"12345"})},children:"Reset"})]}))]}))})})},ae=n(102),re=n(314),ie=n(103),se=(n(285),function(e){return isNaN(e.value)?e.initialValue:e.value}),oe=function(e){return Object(Q.jsx)("div",{className:"currencyInputContainer",children:Object(Q.jsx)("div",{className:"currencyBox",children:Object(Q.jsxs)("div",{className:"amount",children:[Object(Q.jsx)("div",{className:"ant-input-group-addon",style:{verticalAlign:"middle",display:"inline-table"},children:"\xa3"}),Object(Q.jsx)(re.a,{size:"large",value:se(e),formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onChange:e.onChange,placeholder:e.placeholder,disabled:e.disabled,className:"true"===e.disabled?"currencyTrue":e.initialValue||0===e.initialValue?"currencyInputFilled":"",block:!0},"currency:".concat(e.initialValue))]})})})},le=ae.a.Option,ue={wrapperCol:{md:{offset:11}}},je=function(e){var t=k.a.useForm(),n=Object(u.a)(t,1)[0],c=n.getFieldValue,r=a.a.useState(!1),i=Object(u.a)(r,2),s=i[0],j=i[1],d=a.a.useState(!1),b=Object(u.a)(d,2),h=b[0],O=b[1],m=a.a.useState(!1),p=Object(u.a)(m,2),f=p[0],x=p[1],v=a.a.useState(!1),g=Object(u.a)(v,2),S=g[0],N=g[1],C=e.visible,I=e.close,A=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_auto=s,e.next=3,z(t);case 3:n=e.sent,I(),window.open("/?no=".concat(n.no),"_self");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(_.a,{visible:C,title:"New Auction",onCancel:function(){I()},width:1e3,footer:[],children:Object(Q.jsxs)(k.a,{labelCol:{span:4},wrapperCol:{span:20},layout:"horizontal",form:n,name:"control-hooks",onFinish:A,children:[Object(Q.jsx)(k.a.Item,{name:"auc_type",label:"type",rules:[{required:!0}],children:Object(Q.jsxs)(ae.a,{initialValue:H.ENGLISH,style:{width:"100%"},onChange:function(e){x(e===H.DUTCH),O(e===H.SEALED1||e===H.SEALED2)},children:[Object(Q.jsx)(le,{value:H.ENGLISH,children:"ENGLISH"}),Object(Q.jsx)(le,{value:H.DUTCH,children:"DUTCH"}),Object(Q.jsx)(le,{value:H.SEALED1,children:"SEALED1"}),Object(Q.jsx)(le,{value:H.SEALED2,children:"SEALED2"})]})}),Object(Q.jsx)(k.a.Item,{name:"title",label:"title",rules:[{required:!0}],children:Object(Q.jsx)(E.a,{style:{width:"100%"}})}),Object(Q.jsx)(k.a.Item,{name:"period",label:"Time limitaion",style:{width:"100%"},rules:[{required:!0}],children:Object(Q.jsx)(re.a,{style:{width:"100%"}})}),h?null:Object(Q.jsx)(k.a.Item,{name:"init_price",label:"init_price",rules:[{required:!0}],children:Object(Q.jsx)(oe,{placeholder:"E.g. 500,000",initialValue:c("init_price")})}),Object(Q.jsx)(k.a.Item,{name:"reservation_price",label:"Resevation price",style:{width:"100%"},rules:[{required:!0}],children:Object(Q.jsx)(oe,{placeholder:"E.g. 500,000",initialValue:c("reservation_price")})}),Object(Q.jsx)(k.a.Item,{name:"value_type",label:"user value type ",rules:[{required:!0}],children:Object(Q.jsxs)(ae.a,{initialValue:B.UNIFORM,style:{width:"100%"},onChange:function(e){N(e===B.GAUSSIAN)},children:[Object(Q.jsx)(le,{value:B.UNIFORM,children:"UNIFORM"}),Object(Q.jsx)(le,{value:B.GAUSSIAN,children:"GAUSSIAN"})]})}),Object(Q.jsx)(k.a.Item,{name:"from_std",label:S?"std":"from",rules:[{required:!0}],children:Object(Q.jsx)(oe,{placeholder:"E.g. 500,000",initialValue:c("from_std")})}),Object(Q.jsx)(k.a.Item,{name:"to_dev",label:S?"dev":"to",rules:[{required:!0}],children:Object(Q.jsx)(oe,{placeholder:"E.g. 500,000",initialValue:c("to_dev")})}),f?Object(Q.jsx)(k.a.Item,{name:"is_auto",label:"is auto",children:Object(Q.jsx)(ie.a,{onChange:function(e){j(e.target.checked)},checked:s})}):null,s?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(k.a.Item,{name:"auto_p_fragment",label:"auto_p_fragment",rules:[{required:!0}],children:Object(Q.jsx)(oe,{placeholder:"E.g. 500,000",initialValue:c("auto_p_fragment")})}),Object(Q.jsx)(k.a.Item,{name:"auto_t_fragment",label:"auto_t_fragment",rules:[{required:!0}],children:Object(Q.jsx)(re.a,{style:{width:"100%"}})})]}):null,Object(Q.jsxs)(k.a.Item,Object(w.a)(Object(w.a)({},ue),{},{children:[Object(Q.jsx)(y.a,{type:"primary",htmlType:"submit",style:{marginRight:20},children:"Submit"}),Object(Q.jsx)(y.a,{children:"cancel"})]}))]})})})},de=n(126),be=n(127),he=function(e){var t=c.useState(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],i=c.useState(!1),s=Object(u.a)(i,2),j=s[0],d=s[1],b=Object(N.c)((function(e){return e.isLogin})),m=Object(N.c)((function(e){return e.user})),p=Object(N.b)(),v=Object(N.c)((function(e){return e.showMenu})),w=Object(N.c)((function(e){return e.showCreatePanel})),k=function(){p({type:h,data:!v})},_=function(e){p(function(e){return{type:O,data:e}}(e))};c.useEffect((function(){E()}),[]);var E=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!(t.status>=400)){e.next=8;break}return S.b.warning(t.message),e.abrupt("return");case 8:t&&p(f(t));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"navBar",children:[Object(Q.jsxs)("div",{className:"groupLogo",children:[Object(Q.jsx)("div",{className:"logoIcon burger",onClick:function(){return k()},children:Object(Q.jsx)(g.a,{})}),Object(Q.jsx)("div",{className:"logoTxt",children:"Auction Game"}),Object(Q.jsx)("div",{className:"logoIcon",children:Object(Q.jsx)(de.a,{icon:be.a})})]}),Object(Q.jsxs)("div",{className:"groupBtn",children:[b?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("div",{className:"navBtn",children:["Hi Admin: ",m.username]}),Object(Q.jsx)("div",{className:"navBtn",children:Object(Q.jsx)(y.a,{onClick:function(){return _(!0)},children:"New Auction"})}),Object(Q.jsx)("div",{className:"navBtn",children:Object(Q.jsx)(y.a,{onClick:function(){return localStorage.removeItem(V),void p(x())},children:"Log out"})})]}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"navBtn",children:Object(Q.jsx)(y.a,{onClick:function(){return r(!0)},children:"Login"})}),Object(Q.jsx)("div",{className:"navBtn",children:Object(Q.jsx)(y.a,{onClick:function(){return d(!0)},children:"New Admin"})})]}),j?Object(Q.jsx)(ee,{visible:j,close:function(){return d(!1)}}):null,a?Object(Q.jsx)(ce,{visible:a,close:function(){return r(!1)}}):null,w?Object(Q.jsx)(je,{visible:w,close:function(){return _(!1)}}):null]})]})},Oe=n(77),me=(n(288),n(79)),pe=n(320),fe=n(321),xe=n(322),ve=n(62),ge=n.n(ve),Se=n(42),ye=n(133),Ne=me.a.SubMenu,we=function(e){var t,n,c,r,i=a.a.useState(),s=Object(u.a)(i,2),j=s[0],d=s[1],b=a.a.useState(H.ENGLISH),h=Object(u.a)(b,2),O=h[0],m=h[1],p=Object(N.c)((function(e){return e.currentAuction})),f=Object(N.b)();a.a.useEffect((function(){v()}),[]),a.a.useEffect((function(){m(p.auc_type)}),[p]);var v=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(!((n=e.sent).status>=400)){e.next=7;break}return S.b.warning(n.message),f(x()),e.abrupt("return");case 7:t={},Object(Oe.a)(t,H.ENGLISH,g(H.ENGLISH,n)),Object(Oe.a)(t,H.DUTCH,g(H.DUTCH,n)),Object(Oe.a)(t,H.SEALED1,g(H.SEALED1,n)),Object(Oe.a)(t,H.SEALED2,g(H.SEALED2,n)),d(c=t),console.log(2222,c);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e,t){var n=[];return Array.isArray(t)&&t&&(n=null===t||void 0===t?void 0:t.filter((function(t){return t.auc_type===e}))),n},y=function(e){m(e)};return Object(Q.jsx)("div",{className:"sideMenu",children:Object(Q.jsxs)(me.a,{defaultSelectedKeys:["1"],defaultOpenKeys:[H.ENGLISH],openKeys:[O],mode:"inline",theme:"light",inlineCollapsed:!1,children:[Object(Q.jsx)(Ne,{icon:Object(Q.jsx)(pe.a,{}),title:"English",onTitleClick:function(){y(H.ENGLISH)},children:j&&(null===(t=j[H.ENGLISH])||void 0===t?void 0:t.map((function(e){return Object(Q.jsx)(me.a.Item,{children:Object(Q.jsxs)(Se.b,{to:"/?no=".concat(e.no),children:[null!==e.close_time?Object(Q.jsx)(ye.a,{}):null,e.title]})},e.no)})))},H.ENGLISH),Object(Q.jsx)(Ne,{icon:Object(Q.jsx)(fe.a,{}),title:"Dutch",onTitleClick:function(){y(H.DUTCH)},children:j&&(null===(n=j[H.DUTCH])||void 0===n?void 0:n.map((function(e){return Object(Q.jsx)(me.a.Item,{children:Object(Q.jsxs)(Se.b,{to:"/?no=".concat(e.no),children:[null!==e.close_time?Object(Q.jsx)(ye.a,{}):null,e.title]})},e.no)})))},H.DUTCH),Object(Q.jsx)(Ne,{icon:Object(Q.jsx)(xe.a,{}),title:"Sealed",onTitleClick:function(){y(H.SEALED1)},children:j&&(null===(c=j[H.SEALED1])||void 0===c?void 0:c.map((function(e){return Object(Q.jsx)(me.a.Item,{children:Object(Q.jsxs)(Se.b,{to:"/?no=".concat(e.no),children:[null!==e.close_time?Object(Q.jsx)(ye.a,{}):null,e.title]})},e.no)})))},H.SEALED1),Object(Q.jsx)(Ne,{icon:Object(Q.jsx)(xe.a,{}),title:"Sealed second",onTitleClick:function(){y(H.SEALED2)},children:j&&(null===(r=j[H.SEALED2])||void 0===r?void 0:r.map((function(e){return Object(Q.jsx)(me.a.Item,{children:Object(Q.jsxs)(Se.b,{to:"/?no=".concat(e.no),children:[null!==e.close_time?Object(Q.jsx)(ye.a,{}):null,e.title]})},e.no)})))},H.SEALED2)]})})},ke=(n(291),n(292),function(e){return Object(Q.jsxs)("li",{className:"ListItem",children:[Object(Q.jsx)("div",{className:"label",children:e.label}),Object(Q.jsx)("div",{className:"text",children:e.children||e.text})]})}),_e=function(e){var t=e.data,n=e.isPlayer,c=e.playerInfo,a=t.no,r=t.title,i=t.start_time,s=t.left_time,o=t.auto_t_fragment,l=t.auto_p_fragment,u=t.from_std,j=t.init_price,d=t.is_auto,b=t.period,h=t.reservation_price,O=t.to_dev,m=t.value_type,p=t.winner,f=t.auc_type,x=t.close_time,v=t.current_price,g=function(e){var t="";return Object.keys(H).forEach((function(n){e===H[n]&&(t=n)})),t},S=function(e){var t;return null===e||void 0===e||null===(t=e.split(".")[0])||void 0===t?void 0:t.replace("T"," ")},y=function(e){switch(e){case"from":return m===B.GAUSSIAN?"std":e;case"to":return m===B.GAUSSIAN?"dev":e;default:return}},N="- -";return Object(Q.jsx)(Q.Fragment,{children:n?Object(Q.jsxs)("div",{className:"forPlayer",children:[Object(Q.jsx)(ke,{label:"Title",text:r||N}),Object(Q.jsx)(ke,{label:"No",children:Object(Q.jsx)(Se.b,{to:"/invitation?title=".concat(r,"&no=").concat(a),target:"_blank",children:a})}),Object(Q.jsx)(ke,{label:"Type",text:g(f)}),Object(Q.jsx)(ke,{label:"Start Price",text:j||"-"}),Object(Q.jsx)("h3",{children:" - About You - "}),n&&c?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ke,{label:"Name",text:c.name}),Object(Q.jsx)(ke,{label:"Initial money",text:c.init_value})]}):null]}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("ul",{className:"block",children:[Object(Q.jsx)(ke,{label:"Title",text:r||N}),Object(Q.jsx)(ke,{label:"No",children:Object(Q.jsx)(Se.b,{to:"/invitation?title=".concat(r,"&no=").concat(a),target:"_blank",children:a})})]}),Object(Q.jsxs)("ul",{className:"block",children:[Object(Q.jsx)(ke,{label:"Start at",text:S(i)||N}),x?Object(Q.jsx)(ke,{label:"Close at",text:S(x)||N}):Object(Q.jsx)(ke,{label:"Left",text:s||N})]}),Object(Q.jsxs)("ul",{className:"block",children:[Object(Q.jsx)(ke,{label:"Type",text:g(f)}),Object(Q.jsx)(ke,{label:"Start Price",text:j||"-"}),Object(Q.jsx)(ke,{label:"Time Limitation",text:"".concat(b," mins")})]}),Object(Q.jsxs)("ul",{className:"block",children:[Object(Q.jsx)(ke,{label:"User value type",text:function(e){var t="";return Object.keys(B).forEach((function(n){e===B[n]&&(t=n)})),t}(m)}),Object(Q.jsx)(ke,{label:"User value ".concat(y("from")),text:u}),Object(Q.jsx)(ke,{label:"User value ".concat(y("to")),text:O})]}),Object(Q.jsxs)("ul",{className:"block",children:[Object(Q.jsx)(ke,{label:"Reservation price",text:h||0}),f===H.SEALED1||f===H.SEALED2?null:Object(Q.jsx)(ke,{label:"Initial price",text:j}),p?Object(Q.jsx)(ke,{label:"Winner",text:p}):f!==H.SEALED1&&f!==H.SEALED2?Object(Q.jsx)(ke,{label:"Current price",text:v}):null]}),d?Object(Q.jsxs)("ul",{className:"block",children:[Object(Q.jsx)(ke,{label:"is Auto",text:d?"T":"F"}),Object(Q.jsx)(ke,{label:"auto price fragment",text:l}),Object(Q.jsx)(ke,{label:"auto time fragment",text:"".concat(o," mins")})]}):null]})})},Ee=n(317),Ce=n(312),Ie=function(e){var t,n=e.data,c=e.hasWinner,a=e.chooseSecond,r=e.reservationPrice,i=e.initValueNoShow,s=e.titleNoShow;return Object(Q.jsxs)(Q.Fragment,{children:[s?null:Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Ee.b,{title:"Orders"}),"Total: ",(null===n||void 0===n?void 0:n.length)||0]}),Object(Q.jsx)(Ce.a,{columns:i?[{title:"Price",dataIndex:"price"},{title:"Name",dataIndex:"name"},{title:"Time",dataIndex:"time"}]:[{title:"Price",dataIndex:"price"},{title:"Name",dataIndex:"name"},{title:"Init value",dataIndex:"init_value",onFilter:function(e,t){return 0===t.address.indexOf(e)},sorter:function(e,t){return e.init_value-t.init_value},sortDirections:["descend","ascend"]},{title:"Time",dataIndex:"time"}],dataSource:(t=n,t&&t.map((function(e,t){return{price:c&&t===(a?1:0)&&e.price>=r?"Winner: ".concat(e.price):e.price,name:e.player.name,init_value:e.player.init_value,time:e.createdAt.split(".")[0].split("T").join(" ")}}))),pagination:!1,scroll:{y:200}})]})},Ae=function(e){var t=e.data;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Ee.b,{title:"Players"}),"Total: ",(null===t||void 0===t?void 0:t.length)||0,Object(Q.jsx)(Ce.a,{columns:[{title:"Name",dataIndex:"name",onFilter:function(e,t){return 0===t.name.indexOf(e)},sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["descend","ascend"]},{title:"Sent order",dataIndex:"hasSent",filters:[{text:"T",value:"T"},{text:"F",value:"F"}],onFilter:function(e,t){return t.hasSent===e},sorter:function(e,t){return e.price-t.price},sortDirections:["descend","ascend"]}],dataSource:function(e){return e&&e.map((function(e,t){return{name:e.name,hasSent:e.init_value>e.current_value?"T":"F"}}))}(t),pagination:!1,scroll:{y:200}})]})},De=new j.w3cwebsocket("ws://auc-websocket.herokuapp.com/");var Te=function(e){var t=new Date,n=a.a.useState("-"),r=Object(u.a)(n,2),i=(r[0],r[1]),s=a.a.useState(t),j=Object(u.a)(s,2),d=(j[0],j[1],a.a.useState(t)),b=Object(u.a)(d,2),h=(b[0],b[1],a.a.useState(0)),O=Object(u.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(!1),x=Object(u.a)(f,2),g=(x[0],x[1]),w=Object(N.c)((function(e){return e.currentAuction})),k=Object(N.c)((function(e){return e.showMenu})),_=Object(N.c)((function(e){return e.isLogin})),E=Object(N.b)();a.a.useEffect((function(){I()}),[e]),a.a.useEffect((function(){console.log("current_auction_data",w)}),[w]),a.a.useEffect((function(){De.onopen=function(){console.log("WebSocket Client Connected")},De.onmessage=function(e){console.log("response msg: ",e);var t=JSON.parse(e.data);"time"===t.type&&i(t.left_time)}}),[]);var C=function(e){!function(e){console.log("waitForConnection"),1===De.readyState?e():console.log("Error",De.readyState)}((function(){De.send(e)}))};function I(){var t=ge.a.parse(e.location.search);return A(t.no),t.no}a.a.useEffect((function(){De.onopen=function(){console.log("WebSocket Client Connected")},De.onmessage=function(e){console.log("response msg: ",e)}}),[]);var A=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$(t);case 4:(n=e.sent)&&E(v(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){var n;switch(e){case"start":!function(e){console.log("sendBroadcast",e),C(JSON.stringify({isBroadcast:!0,type:"time",no:I()}))}(),n=w.no,q()({method:P,url:T(n),headers:{"x-access-token":R}}).then((function(e){return e.data}),(function(e){console.log(e)}));break;case"close":console.log("\u5df2\u7d93\u95dc\u4e86"),g(!0),function(e,t){return q()({method:P,url:L(e),headers:{"x-access-token":R}}).then((function(e){return e.data}),(function(e){console.log(e)}))}(w.no);break;case"updateWithCountDown":B()}};function B(){$(w.no).then((function(e){e&&(E(v(e)),e.close_time||B())}))}var V=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.current_price-m<0)){e.next=3;break}return S.b.success("Current price - deduction is less than 0"),e.abrupt("return");case 3:if(0!==m){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n=w.no,c=m,q()({method:U,url:F(n),headers:{"x-access-token":R},data:{deductValue:c}}).then((function(e){return console.log("deductAuction",e),e.data}),(function(e){console.log(e)}));case 7:if(!((t=e.sent).status>=400)){e.next=11;break}return S.b.warning(t.message),e.abrupt("return");case 11:S.b.success("Current price is ".concat(t.current_price));case 12:case"end":return e.stop()}var n,c}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsx)(he,{}),Object(Q.jsxs)("div",{className:"container",children:[k?Object(Q.jsx)(we,{}):null,_?Object(Q.jsxs)("div",{className:"auctionBlock",children:[Object(Q.jsxs)("div",{className:"start_btn",children:[Object(Q.jsx)(y.a,{type:"primary",onClick:function(){D("start")},children:"Start"}),Object(Q.jsx)(y.a,{onClick:function(){D("close")},children:"Close"}),Object(Q.jsx)(Se.b,{to:"/presentation?no=".concat(w.no),target:"_blank",children:"Presentation"})]}),Object(Q.jsx)(_e,{data:w}),w.auc_type!==H.DUTCH||w.is_auto?null:Object(Q.jsxs)("div",{className:"myOrder",children:[Object(Q.jsx)(re.a,{onChange:function(e){return p(e)},value:m}),Object(Q.jsx)(y.a,{type:"primary",onClick:function(){V()},children:"DEDUCT"}),Object(Q.jsx)(y.a,{onClick:function(){p(0)},children:"Reset"})]}),Object(Q.jsx)(Ie,{data:w.orders,hasWinner:w.close_time,chooseSecond:w.auc_type===H.SEALED2,reservationPrice:w.reservation_price||0}),Object(Q.jsx)(Ae,{data:w.players})]}):Object(Q.jsx)("div",{className:"remider",children:"Please login"})]})]})},Le=(n(298),n(299),function(e){return Object(Q.jsx)("div",{className:"invitationNavBar",children:Object(Q.jsxs)("div",{className:"groupLogo",children:[Object(Q.jsx)("div",{className:"logoTxt",children:"Auction Game"}),Object(Q.jsx)("div",{className:"logoIcon",children:Object(Q.jsx)(de.a,{icon:be.a})})]})})}),Fe=n(300);var Pe=function(e){var t=a.a.useState({}),n=Object(u.a)(t,2),c=n[0],r=n[1];a.a.useEffect((function(){!function(){var t=ge.a.parse(e.location.search);r(t)}()}),[e]);var i="/bid?no=".concat(c.no);return Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsx)(Le,{}),Object(Q.jsx)("div",{className:"container",children:Object(Q.jsxs)("div",{className:"invitation",children:[Object(Q.jsx)("h1",{children:"Welcome to join the auction! "}),Object(Q.jsxs)("h3",{children:["Auction title: ",c.title]}),Object(Q.jsxs)("h3",{children:["Auction no: ",c.no]}),Object(Q.jsx)("div",{className:"qrCode",children:Object(Q.jsx)(Fe,{value:i})}),Object(Q.jsx)("div",{children:Object(Q.jsx)(Se.b,{to:i,target:"_blank",children:i})})]})})]})},Ue=(n(306),n(307),function(e){var t,n=e.playerAuctionData;return Object(Q.jsx)("div",{className:"aucType row",children:Object(Q.jsx)("div",{children:(t=null===n||void 0===n?void 0:n.auc_type,Object.keys(H).filter((function(e){return H[e]===t})))})})}),He=new j.w3cwebsocket("ws://auc-websocket.herokuapp.com/"),Be={labelCol:{span:8},wrapperCol:{span:16}},Ve={wrapperCol:{sm:{offset:0},md:{offset:8},span:16}};var Ge=function(e){var t=k.a.useForm(),n=Object(u.a)(t,1)[0],c=a.a.useState(0),r=Object(u.a)(c,2),i=r[0],s=r[1],j=a.a.useState("-"),d=Object(u.a)(j,2),b=d[0],h=d[1],O=Object(N.c)((function(e){return e.playerData})),p=Object(N.c)((function(e){return e.showPlayerPage})),f=a.a.useState(),x=Object(u.a)(f,2),v=x[0],g=x[1],_=a.a.useState([{rice:100,updatedAt:"00:12:13"},{rice:200,updatedAt:"00:15:13"}]),C=Object(u.a)(_,2),A=C[0],D=C[1],T=a.a.useState({}),L=Object(u.a)(T,2),F=L[0],U=L[1];console.log("playerAuctionData",F);var B=Object(N.b)();a.a.useEffect((function(){G(),function(){(e=G(),q()({method:P,url:I(e)}).then((function(e){return e.data}),(function(e){console.log(e)}))).then((function(e){e&&(U(e),e.auc_type===H.DUTCH&&s(e.current_price))}));var e}()}),[]),a.a.useEffect((function(){He.onopen=function(){console.log("WebSocket Client Connected")},He.onmessage=function(e){console.log("Bidder response msg: ",e);var t=JSON.parse(e.data);"time"===t.type&&h(t.left_time)}}),[]);var V=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auctionNo,c=t.name,e.next=3,Y(n,c);case 3:if(!((a=e.sent).status>=400)){e.next=7;break}return S.b.warning(a.message),e.abrupt("return");case 7:B({type:m,data:a}),s("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function G(){var t=ge.a.parse(e.location.search);return n.setFieldsValue({auctionNo:t.no}),t.no}var M=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n={player_id:O.id,price:t?F.current_price:i}).price>O.current_value)){e.next=4;break}return S.b.error("The price is less than you're current value"),e.abrupt("return");case 4:return e.next=6,K(F.no,n);case 6:if(!((c=e.sent).status>=400)){e.next=10;break}return S.b.warning(c.message),e.abrupt("return");case 10:D((function(e){return e.push({price:n.price,updatedAt:c.updatedAt}),e})),g(c.left_value),S.b.success("Your order(price at".concat(n.price,") had been sent"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){return F.start_time?F.close_time?"End":"Bidding":"Waiting"};return Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsx)(Le,{}),Object(Q.jsx)("div",{className:"container",children:p?Object(Q.jsxs)("div",{className:"playerPage",children:[Object(Q.jsx)("div",{className:"cover top"}),Object(Q.jsx)("div",{className:"cover down"}),Object(Q.jsxs)("div",{className:"header fixed",children:[Object(Q.jsx)(Ue,{playerAuctionData:F}),Object(Q.jsxs)("div",{className:"time row",children:[Object(Q.jsxs)("div",{className:"highlight block",children:[Object(Q.jsx)("div",{className:"title",children:"Current Price"}),Object(Q.jsx)("div",{className:"value",children:null===F||void 0===F?void 0:F.current_price})]}),Object(Q.jsxs)("div",{className:"highlight block",children:[Object(Q.jsx)("div",{className:"title",children:"Timer"}),Object(Q.jsx)("div",{className:"value",children:b})]})]})]}),Object(Q.jsxs)("div",{className:"blockAuction row",children:[Object(Q.jsx)(_e,{data:F,isPlayer:!0,playerInfo:O,leftValue:v}),Object(Q.jsx)(ke,{label:"My orders",children:function(){var e=JSON.parse(JSON.stringify(A));return Object(Q.jsx)("ul",{children:e.reverse().map((function(e){return Object(Q.jsx)("li",{children:"".concat(e.updatedAt," : $ ").concat(e.price)})}))})}()})]}),Object(Q.jsxs)("div",{className:"blockBidder row fixed",children:[Object(Q.jsxs)("div",{className:"myMoney",children:[Object(Q.jsx)("div",{className:"label",children:"\ud83d\udc5b My Money: "}),Object(Q.jsx)("div",{className:"value",children:(null===F||void 0===F?void 0:F.current_value)||100}),Object(Q.jsx)("div",{className:"status ".concat(R()),children:R()})]}),Object(Q.jsxs)("div",{className:"myOrder",children:[Object(Q.jsx)("div",{className:"bidInput",children:Object(Q.jsx)(re.a,{onChange:function(e){return s(e)},value:i,size:"large",autoFocus:!0})}),Object(Q.jsx)("div",{className:"bidBtn",children:Object(Q.jsx)("div",{className:"btn",onClick:function(){M()},children:(null===F||void 0===F?void 0:F.auc_type)===H.DUTCH?"Accept":"BID"})})]})]})]}):Object(Q.jsx)("div",{className:"bid",children:Object(Q.jsxs)(k.a,Object(w.a)(Object(w.a)({},Be),{},{form:n,name:"control-hooks",onFinish:V,children:[Object(Q.jsx)(k.a.Item,{name:"auctionNo",label:"Auction No",rules:[{required:!0,message:"Please input a auction no!"}],children:Object(Q.jsx)(E.a,{disabled:!0})}),Object(Q.jsx)(k.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input an user name!"}],children:Object(Q.jsx)(E.a,{})}),Object(Q.jsxs)(k.a.Item,Object(w.a)(Object(w.a)({},Ve),{},{children:[Object(Q.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Q.jsx)(y.a,{htmlType:"button",onClick:function(){n.setFieldsValue({auctionNo:"",name:""})},children:"Reset"})]}))]}))})})]})},qe=(n(308),n(318)),Me=new j.w3cwebsocket("ws://auc-websocket.herokuapp.com/");var Re=function(e){var t=new Date,n=k.a.useForm(),c=Object(u.a)(n,1)[0],r=a.a.useState(t),i=Object(u.a)(r,2),s=(i[0],i[1],a.a.useState("-")),o=Object(u.a)(s,2),l=o[0],j=o[1],d=a.a.useState(0),b=Object(u.a)(d,2),h=(b[0],b[1]),O=a.a.useState(!0),m=Object(u.a)(O,2),p=m[0],f=m[1],x=(Object(N.c)((function(e){return e.playerData})),Object(N.c)((function(e){return e.currentAuction}))),v=a.a.useState(),g=Object(u.a)(v,2),S=(g[0],g[1],a.a.useState({})),y=Object(u.a)(S,2),w=y[0],_=y[1];function E(){var t=ge.a.parse(e.location.search);return c.setFieldsValue({auctionNo:t.no}),t.no}Object(N.b)(),a.a.useEffect((function(){E(),A()}),[e]),a.a.useEffect((function(){console.log("current_auction_data",x),p||x&&I(x)}),[p]);var C=function(e){!function(e){1===Me.readyState?e():console.log("Error",Me.readyState)}((function(){console.log("waitForConnection",e),Me.send(e)}))},I=function(){C(JSON.stringify({isBroadcast:!0,type:"time",no:E()}))};function A(){setTimeout((function(){$(E()).then((function(e){e&&401!==e.status&&(_(e),e.auc_type===H.DUTCH&&h(e.current_price),e.close_time||A())}))}),1e3)}return a.a.useEffect((function(){Me.onopen=function(){console.log("WebSocket Client Connected")},Me.onmessage=function(e){console.log("response msg: ",e);var t=JSON.parse(e.data);"time"===t.type&&j(t.left_time)}}),[]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Le,{}),Object(Q.jsxs)("div",{className:"presentation",children:[Object(Q.jsx)("div",{className:"timer",children:Object(Q.jsx)("div",{className:"circle",children:l})}),Object(Q.jsx)(Ue,{playerAuctionData:w}),Object(Q.jsx)("div",{className:"currentPrice",children:null===w||void 0===w?void 0:w.current_price}),Object(Q.jsxs)("div",{className:"auctionBlock",children:[Object(Q.jsxs)("div",{className:"initValueNoShowContorller",children:[Object(Q.jsx)(qe.a,{onChange:function(){f(!p)}}),"Show initial value"]}),Object(Q.jsx)("div",{className:"myOrder",children:Object(Q.jsx)(Ie,{data:x.orders,hasWinner:x.close_time,chooseSecond:x.auc_type===H.SEALED2,reservationPrice:x.reservation_price||0,initValueNoShow:p,titleNoShow:!0})})]})]})]})},We=n(29),Je=n(177),ze={user:{},isLogin:!1,showMenu:!1,showCreatePanel:!1,showPlayerPage:!1,currentAuction:{},playerData:{},playerAuctionData:{}};n(309);var Ke=Object(Je.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(w.a)(Object(w.a)({},e),{},{user:t.data,showMenu:!0,isLogin:!0});case b:return Object(w.a)(Object(w.a)({},e),{},{currentAuction:t.data});case h:return Object(w.a)(Object(w.a)({},e),{},{showMenu:t.data});case p:return{isLogin:!1,user:{},showMenu:!1,showCreatePanel:!1,showPlayerPage:!1,currentAuction:{},playerData:{},playerAuctionData:{}};case O:return Object(w.a)(Object(w.a)({},e),{},{showCreatePanel:t.data});case m:return Object(w.a)(Object(w.a)({},e),{},{playerData:t.data,showPlayerPage:!0});default:return e}}));i.a.render(Object(Q.jsx)(N.a,{store:Ke,children:Object(Q.jsx)(Se.a,{children:Object(Q.jsxs)(We.c,{children:[Object(Q.jsx)(We.a,{exact:!0,path:"/",component:Te}),Object(Q.jsx)(We.a,{path:"/invitation",component:Pe}),Object(Q.jsx)(We.a,{path:"/presentation",component:Re}),Object(Q.jsx)(We.a,{path:"/bid",component:Ge})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[310,1,2]]]);
//# sourceMappingURL=main.63fb7ecd.chunk.js.map